{"remainingRequest":"/Users/liuce/ailin-web/frontend/node_modules/babel-loader/lib/index.js!/Users/liuce/ailin-web/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liuce/ailin-web/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuce/ailin-web/frontend/src/views/MobileControl.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuce/ailin-web/frontend/src/views/MobileControl.vue","mtime":1755397238981},{"path":"/Users/liuce/ailin-web/frontend/babel.config.js","mtime":1755361438467},{"path":"/Users/liuce/ailin-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1755361481208},{"path":"/Users/liuce/ailin-web/frontend/node_modules/babel-loader/lib/index.js","mtime":1755361481592},{"path":"/Users/liuce/ailin-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1755361481208},{"path":"/Users/liuce/ailin-web/frontend/node_modules/vue-loader/lib/index.js","mtime":1755361481658}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgRGV2aWNlTGlzdEl0ZW0gZnJvbSAnQC9jb21wb25lbnRzL0RldmljZUxpc3RJdGVtLnZ1ZSc7CmltcG9ydCBTY3JlZW5XaW5kb3cgZnJvbSAnQC9jb21wb25lbnRzL1NjcmVlbldpbmRvdy52dWUnOwppbXBvcnQgU3RhdHVzQmFyIGZyb20gJ0AvY29tcG9uZW50cy9TdGF0dXNCYXIudnVlJzsKaW1wb3J0IHsgbW9iaWxlQXBpIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01vYmlsZUNvbnRyb2wnLAogIGNvbXBvbmVudHM6IHsKICAgIERldmljZUxpc3RJdGVtLAogICAgU2NyZWVuV2luZG93LAogICAgU3RhdHVzQmFyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0NvbmZpZ0RpYWxvZzogZmFsc2UsCiAgICAgIHNlbGVjdGVkRGV2aWNlOiBudWxsLAogICAgICBjb25maWdGb3JtOiB7CiAgICAgICAgYmFzZUlwOiAnMTkyLjE2OC4zMScsCiAgICAgICAgc3RhcnRSYW5nZTogMCwKICAgICAgICBlbmRSYW5nZTogMjU1LAogICAgICAgIGRldGVjdFBvcnQ6IDk4MDEsCiAgICAgICAgc3RyZWFtUG9ydDogOTgwMgogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsnZGV2aWNlcycsICd3c0Nvbm5lY3RlZCcsICduZXR3b3JrQ29uZmlnJywgJ2lzU2Nhbm5pbmcnXSksCiAgICAuLi5tYXBHZXR0ZXJzKFsnZGV2aWNlQ291bnQnLCAnb25saW5lRGV2aWNlQ291bnQnXSksCiAgICAvLyDmjIlJROaOkuW6j+eahOiuvuWkh+WIl+ihqAogICAgc29ydGVkRGV2aWNlcygpIHsKICAgICAgcmV0dXJuIFsuLi50aGlzLmRldmljZXNdLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKTsKICAgIH0sCiAgICAvLyDmmL7npLrlnKjlsY/luZXnvZHmoLzkuK3nmoTorr7lpIfvvIjpmZDliLbmlbDph4/vvIkKICAgIGRpc3BsYXlEZXZpY2VzKCkgewogICAgICByZXR1cm4gdGhpcy5zb3J0ZWREZXZpY2VzOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIC8vIOWFs+mXrVdlYlNvY2tldOi/nuaOpQogICAgaWYgKHRoaXMuJHdzKSB7CiAgICAgIHRoaXMuJHdzLmNsb3NlKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnY29ubmVjdFdlYlNvY2tldCddKSwKICAgIC4uLm1hcE11dGF0aW9ucyhbJ1NFVF9ORVRXT1JLX0NPTkZJRycsICdTRVRfU0NBTk5JTkcnXSksCiAgICAvLyDliJ3lp4vljJYKICAgIGFzeW5jIGluaXQoKSB7CiAgICAgIC8vIOi/nuaOpVdlYlNvY2tldAogICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTsKCiAgICAgIC8vIOWKoOi9vee9kee7nOmFjee9rgogICAgICB0aGlzLmNvbmZpZ0Zvcm0gPSB7CiAgICAgICAgLi4udGhpcy5uZXR3b3JrQ29uZmlnCiAgICAgIH07CgogICAgICAvLyDliqDovb3nvJPlrZjnmoTorr7lpIcKICAgICAgdGhpcy5sb2FkQ2FjaGVkRGV2aWNlcygpOwogICAgfSwKICAgIC8vIOaJq+aPj+iuvuWkh++8iOiwg+eUqOWQjuerr0FQSe+8iQogICAgYXN5bmMgaGFuZGxlU2NhbigpIHsKICAgICAgaWYgKHRoaXMuaXNTY2FubmluZykgcmV0dXJuOwogICAgICB0aGlzLlNFVF9TQ0FOTklORyh0cnVlKTsKICAgICAgdHJ5IHsKICAgICAgICAvLyDmuIXnqbrnjrDmnInorr7lpIfliJfooagKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9ERVZJQ0VTJywgW10pOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5byA5aeL5omr5o+P5bGA5Z+f572R6K6+5aSHLi4uJyk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9iaWxlQXBpLnNjYW5OZXR3b3JrKCk7CiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOaJq+aPj+WujOaIkO+8jOWPkeeOsCAke3Jlc3VsdC5jb3VudH0g5Liq6K6+5aSHYCk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9ERVZJQ0VTJywgcmVzdWx0LmRldmljZXMpOwoKICAgICAgICAgIC8vIOe8k+WtmOWIsOacrOWcsOWtmOWCqAogICAgICAgICAgdGhpcy5zYXZlRGV2aWNlc1RvQ2FjaGUocmVzdWx0LmRldmljZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICfmiavmj4/lpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5omr5o+P6K6+5aSH5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+aJq+aPj+iuvuWkh+Wksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuU0VUX1NDQU5OSU5HKGZhbHNlKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIt+aWsOiuvuWkh+WIl+ihqAogICAgYXN5bmMgaGFuZGxlUmVmcmVzaCgpIHsKICAgICAgLy8g55u05o6l6YeN5paw5Yqg6L2957yT5a2Y55qE6K6+5aSHCiAgICAgIHRoaXMubG9hZENhY2hlZERldmljZXMoKTsKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCforr7lpIfliJfooajlt7LliLfmlrAnKTsKICAgIH0sCiAgICAvLyDnp7vpmaTorr7lpIcKICAgIGFzeW5jIGhhbmRsZVJlbW92ZURldmljZShkZXZpY2VJZCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgeenu+mZpOi/meS4quiuvuWkh+WQl++8nycsICfnoa7orqQnLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pOwoKICAgICAgICAvLyDku47liY3nq6/orr7lpIfliJfooajkuK3np7vpmaQKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1JFTU9WRV9ERVZJQ0UnLCBkZXZpY2VJZCk7CgogICAgICAgIC8vIOabtOaWsOe8k+WtmAogICAgICAgIGNvbnN0IGN1cnJlbnREZXZpY2VzID0gdGhpcy4kc3RvcmUuc3RhdGUuZGV2aWNlczsKICAgICAgICB0aGlzLnNhdmVEZXZpY2VzVG9DYWNoZShjdXJyZW50RGV2aWNlcyk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCforr7lpIflt7Lnp7vpmaQnKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBpZiAoZXJyb3IgIT09ICdjYW5jZWwnKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfnp7vpmaTorr7lpIflpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign56e76Zmk6K6+5aSH5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5pu05paw572R57uc6YWN572uCiAgICBhc3luYyBoYW5kbGVVcGRhdGVDb25maWcoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9iaWxlQXBpLnVwZGF0ZU5ldHdvcmtDb25maWcodGhpcy5jb25maWdGb3JtKTsKICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuU0VUX05FVFdPUktfQ09ORklHKHRoaXMuY29uZmlnRm9ybSk7CiAgICAgICAgICB0aGlzLnNob3dDb25maWdEaWFsb2cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn572R57uc6YWN572u5bey5pu05pawJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgJ+abtOaWsOmFjee9ruWksei0pScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDnvZHnu5zphY3nva7lpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn5pu05paw6YWN572u5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpgInmi6norr7lpIcKICAgIGhhbmRsZVNlbGVjdERldmljZShkZXZpY2UpIHsKICAgICAgdGhpcy5zZWxlY3RlZERldmljZSA9IGRldmljZTsKICAgIH0sCiAgICAvLyDkv53lrZjorr7lpIfliLDnvJPlrZgKICAgIHNhdmVEZXZpY2VzVG9DYWNoZShkZXZpY2VzKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgY2FjaGVEYXRhID0gewogICAgICAgICAgZGV2aWNlczogZGV2aWNlcywKICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgIGNvbmZpZzogdGhpcy5uZXR3b3JrQ29uZmlnCiAgICAgICAgfTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycsIEpTT04uc3RyaW5naWZ5KGNhY2hlRGF0YSkpOwogICAgICAgIGNvbnNvbGUubG9nKCforr7lpIfliJfooajlt7LnvJPlrZgnKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfkv53lrZjorr7lpIfnvJPlrZjlpLHotKU6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgLy8g5LuO57yT5a2Y5Yqg6L296K6+5aSHCiAgICBsb2FkQ2FjaGVkRGV2aWNlcygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjYWNoZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycpOwogICAgICAgIGlmIChjYWNoZWQpIHsKICAgICAgICAgIGNvbnN0IGNhY2hlRGF0YSA9IEpTT04ucGFyc2UoY2FjaGVkKTsKCiAgICAgICAgICAvLyDmo4Dmn6XnvJPlrZjmmK/lkKbov4fmnJ/vvIgyNOWwj+aXtu+8iQogICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgIGNvbnN0IGNhY2hlQWdlID0gbm93IC0gY2FjaGVEYXRhLnRpbWVzdGFtcDsKICAgICAgICAgIGNvbnN0IG1heEFnZSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDI05bCP5pe2CgogICAgICAgICAgaWYgKGNhY2hlQWdlIDwgbWF4QWdlICYmIGNhY2hlRGF0YS5kZXZpY2VzICYmIGNhY2hlRGF0YS5kZXZpY2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgLy8g5L+d55WZ5ZCO56uv5o+Q5L6b55qE6K6+5aSHSUTlkoznirbmgIHvvIzpgb/lhY3liLfmlrDlkI5JROmUmeS5seOAgeeKtuaAgeWPmOemu+e6vwogICAgICAgICAgICBjb25zdCBkZXZpY2VzID0gY2FjaGVEYXRhLmRldmljZXM7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnU0VUX0RFVklDRVMnLCBkZXZpY2VzKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKGDku47nvJPlrZjliqDovb3kuoYgJHtkZXZpY2VzLmxlbmd0aH0g5Liq6K6+5aSHYCk7CgogICAgICAgICAgICAvLyDlj6/pgInvvJrpqozor4HnvJPlrZjnmoTorr7lpIfmmK/lkKbku43nhLblnKjnur8KICAgICAgICAgICAgLy8gdGhpcy52ZXJpZnlDYWNoZWREZXZpY2VzKGRldmljZXMpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDmuIXpmaTov4fmnJ/nvJPlrZgKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vYmlsZV9jb250cm9sX2RldmljZXMnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L296K6+5aSH57yT5a2Y5aSx6LSlOicsIGVycm9yKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycpOwogICAgICB9CiAgICB9LAogICAgLy8g5riF6Zmk6K6+5aSH57yT5a2YCiAgICBjbGVhckRldmljZUNhY2hlKCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycpOwogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+iuvuWkh+e8k+WtmOW3sua4hemZpCcpOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapState","mapGetters","mapActions","mapMutations","DeviceListItem","ScreenWindow","StatusBar","mobileApi","name","components","data","showConfigDialog","selectedDevice","configForm","baseIp","startRange","endRange","detectPort","streamPort","computed","sortedDevices","devices","sort","a","b","id","displayDevices","created","init","beforeDestroy","$ws","close","methods","connectWebSocket","networkConfig","loadCachedDevices","handleScan","isScanning","SET_SCANNING","$store","commit","$message","info","result","scanNetwork","success","count","saveDevicesToCache","error","message","console","handleRefresh","handleRemoveDevice","deviceId","$confirm","confirmButtonText","cancelButtonText","type","currentDevices","state","handleUpdateConfig","updateNetworkConfig","SET_NETWORK_CONFIG","handleSelectDevice","device","cacheData","timestamp","Date","now","config","localStorage","setItem","JSON","stringify","log","cached","getItem","parse","cacheAge","maxAge","length","removeItem","clearDeviceCache"],"sources":["src/views/MobileControl.vue"],"sourcesContent":["<template>\n  <div class=\"mobile-control\">\n    <!-- 头部工具栏 -->\n    <div class=\"toolbar\">\n      <div class=\"toolbar-left\">\n        <h1 class=\"toolbar-title\">手机中控系统</h1>\n        <div class=\"connection-status\">\n          <span class=\"status-indicator\" :class=\"wsConnected ? 'status-online' : 'status-offline'\"></span>\n          {{ wsConnected ? '已连接' : '未连接' }}\n        </div>\n      </div>\n      \n      <div class=\"toolbar-center\">\n        <!-- 统计信息 -->\n        <div class=\"stats-info\">\n          <span class=\"stats-item\">设备总数: <strong>{{ deviceCount }}</strong></span>\n          <span class=\"stats-item\">在线设备: <strong>{{ onlineDeviceCount }}</strong></span>\n          <span class=\"stats-item\">离线设备: <strong>{{ deviceCount - onlineDeviceCount }}</strong></span>\n        </div>\n      </div>\n      \n      <div class=\"toolbar-right\">\n        <!-- 操作按钮 -->\n        <el-button \n          size=\"small\"\n          type=\"primary\" \n          icon=\"el-icon-search\" \n          :loading=\"isScanning\"\n          @click=\"handleScan\"\n        >\n          {{ isScanning ? '扫描中...' : '扫描设备' }}\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-setting\" \n          @click=\"showConfigDialog = true\"\n        >\n          配置\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-refresh\" \n          @click=\"handleRefresh\"\n        >\n          刷新\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-delete\" \n          @click=\"clearDeviceCache\"\n        >\n          清除缓存\n        </el-button>\n      </div>\n    </div>\n\n    <!-- 主要内容区域 -->\n    <div class=\"main-content\">\n      <!-- 左侧设备列表 -->\n      <div class=\"device-sidebar\">\n        <div class=\"sidebar-header\">\n          <span class=\"sidebar-title\">设备列表</span>\n          <el-button \n            type=\"text\" \n            icon=\"el-icon-plus\" \n            size=\"mini\"\n            :loading=\"isScanning\"\n            @click=\"handleScan\"\n          >\n            {{ isScanning ? '扫描中' : '扫描' }}\n          </el-button>\n        </div>\n        \n        <div class=\"device-list\">\n          <DeviceListItem\n            v-for=\"device in sortedDevices\"\n            :key=\"device.id\"\n            :device=\"device\"\n            :selected=\"selectedDevice && selectedDevice.id === device.id\"\n            @select=\"handleSelectDevice\"\n            @remove=\"handleRemoveDevice\"\n          />\n          \n          <!-- 空状态 -->\n          <div v-if=\"devices.length === 0\" class=\"empty-list\">\n            <el-empty \n              description=\"暂无设备\" \n              :image-size=\"80\"\n            >\n              <el-button \n                type=\"primary\" \n                size=\"small\"\n                @click=\"handleScan\"\n              >\n                开始扫描\n              </el-button>\n            </el-empty>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 右侧屏幕网格 -->\n      <div class=\"screen-area\">\n        <div class=\"screen-grid\">\n          <ScreenWindow\n            v-for=\"device in displayDevices\"\n            :key=\"device.id\"\n            :device=\"device\"\n            @select=\"handleSelectDevice\"\n          />\n        </div>\n      </div>\n    </div>\n    \n    <!-- 底部状态栏 -->\n    <StatusBar />\n\n    <!-- 网络配置对话框 -->\n    <el-dialog\n      title=\"网络配置\"\n      :visible.sync=\"showConfigDialog\"\n      width=\"500px\"\n    >\n      <div class=\"config-panel\" style=\"margin: 0; box-shadow: none;\">\n        <div class=\"config-row\">\n          <label class=\"config-label\">基础IP:</label>\n          <el-input\n            v-model=\"configForm.baseIp\"\n            placeholder=\"例如：192.168.31\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">起始范围:</label>\n          <el-input-number\n            v-model=\"configForm.startRange\"\n            :min=\"0\"\n            :max=\"255\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">结束范围:</label>\n          <el-input-number\n            v-model=\"configForm.endRange\"\n            :min=\"0\"\n            :max=\"255\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">检测端口:</label>\n          <el-input-number\n            v-model=\"configForm.detectPort\"\n            :min=\"1\"\n            :max=\"65535\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">投屏端口:</label>\n          <el-input-number\n            v-model=\"configForm.streamPort\"\n            :min=\"1\"\n            :max=\"65535\"\n            style=\"flex: 1;\"\n          />\n        </div>\n      </div>\n      \n      <div slot=\"footer\">\n        <el-button @click=\"showConfigDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleUpdateConfig\">保存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex'\nimport DeviceListItem from '@/components/DeviceListItem.vue'\nimport ScreenWindow from '@/components/ScreenWindow.vue'\nimport StatusBar from '@/components/StatusBar.vue'\nimport { mobileApi } from '@/services/api'\n\nexport default {\n  name: 'MobileControl',\n  components: {\n    DeviceListItem,\n    ScreenWindow,\n    StatusBar\n  },\n  \n  data() {\n    return {\n      showConfigDialog: false,\n      selectedDevice: null,\n      configForm: {\n        baseIp: '192.168.31',\n        startRange: 0,\n        endRange: 255,\n        detectPort: 9801,\n        streamPort: 9802\n      }\n    }\n  },\n  \n  computed: {\n    ...mapState(['devices', 'wsConnected', 'networkConfig', 'isScanning']),\n    ...mapGetters(['deviceCount', 'onlineDeviceCount']),\n    \n    // 按ID排序的设备列表\n    sortedDevices() {\n      return [...this.devices].sort((a, b) => a.id - b.id)\n    },\n    \n    // 显示在屏幕网格中的设备（限制数量）\n    displayDevices() {\n      return this.sortedDevices\n    },\n    \n  },\n  \n  created() {\n    this.init()\n  },\n  \n  beforeDestroy() {\n    // 关闭WebSocket连接\n    if (this.$ws) {\n      this.$ws.close()\n    }\n  },\n  \n  methods: {\n    ...mapActions(['connectWebSocket']),\n    ...mapMutations(['SET_NETWORK_CONFIG', 'SET_SCANNING']),\n    \n    // 初始化\n    async init() {\n      // 连接WebSocket\n      this.connectWebSocket()\n      \n      // 加载网络配置\n      this.configForm = { ...this.networkConfig }\n      \n      // 加载缓存的设备\n      this.loadCachedDevices()\n    },\n    \n\n    \n    // 扫描设备（调用后端API）\n    async handleScan() {\n      if (this.isScanning) return\n      \n      this.SET_SCANNING(true)\n      \n      try {\n        // 清空现有设备列表\n        this.$store.commit('SET_DEVICES', [])\n        \n        this.$message.info('开始扫描局域网设备...')\n        \n        const result = await mobileApi.scanNetwork()\n        \n        if (result.success) {\n          this.$message.success(`扫描完成，发现 ${result.count} 个设备`)\n          this.$store.commit('SET_DEVICES', result.devices)\n          \n          // 缓存到本地存储\n          this.saveDevicesToCache(result.devices)\n        } else {\n          this.$message.error(result.message || '扫描失败')\n        }\n        \n      } catch (error) {\n        console.error('扫描设备失败:', error)\n        this.$message.error(error.message || '扫描设备失败')\n      } finally {\n        this.SET_SCANNING(false)\n      }\n    },\n    \n    // 刷新设备列表\n    async handleRefresh() {\n      // 直接重新加载缓存的设备\n      this.loadCachedDevices()\n      this.$message.success('设备列表已刷新')\n    },\n    \n    // 移除设备\n    async handleRemoveDevice(deviceId) {\n      try {\n        await this.$confirm('确定要移除这个设备吗？', '确认', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        \n        // 从前端设备列表中移除\n        this.$store.commit('REMOVE_DEVICE', deviceId)\n        \n        // 更新缓存\n        const currentDevices = this.$store.state.devices\n        this.saveDevicesToCache(currentDevices)\n        \n        this.$message.success('设备已移除')\n        \n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('移除设备失败:', error)\n          this.$message.error('移除设备失败')\n        }\n      }\n    },\n    \n    // 更新网络配置\n    async handleUpdateConfig() {\n      try {\n        const result = await mobileApi.updateNetworkConfig(this.configForm)\n        \n        if (result.success) {\n          this.SET_NETWORK_CONFIG(this.configForm)\n          this.showConfigDialog = false\n          this.$message.success('网络配置已更新')\n        } else {\n          this.$message.error(result.message || '更新配置失败')\n        }\n      } catch (error) {\n        console.error('更新网络配置失败:', error)\n        this.$message.error(error.message || '更新配置失败')\n      }\n    },\n    \n    // 选择设备\n    handleSelectDevice(device) {\n      this.selectedDevice = device\n    },\n    \n\n    \n    // 保存设备到缓存\n    saveDevicesToCache(devices) {\n      try {\n        const cacheData = {\n          devices: devices,\n          timestamp: Date.now(),\n          config: this.networkConfig\n        }\n        localStorage.setItem('mobile_control_devices', JSON.stringify(cacheData))\n        console.log('设备列表已缓存')\n      } catch (error) {\n        console.error('保存设备缓存失败:', error)\n      }\n    },\n    \n    // 从缓存加载设备\n    loadCachedDevices() {\n      try {\n        const cached = localStorage.getItem('mobile_control_devices')\n        if (cached) {\n          const cacheData = JSON.parse(cached)\n          \n          // 检查缓存是否过期（24小时）\n          const now = Date.now()\n          const cacheAge = now - cacheData.timestamp\n          const maxAge = 24 * 60 * 60 * 1000 // 24小时\n          \n          if (cacheAge < maxAge && cacheData.devices && cacheData.devices.length > 0) {\n            // 保留后端提供的设备ID和状态，避免刷新后ID错乱、状态变离线\n            const devices = cacheData.devices\n            this.$store.commit('SET_DEVICES', devices)\n            this.$message.info(`从缓存加载了 ${devices.length} 个设备`)\n            \n            // 可选：验证缓存的设备是否仍然在线\n            // this.verifyCachedDevices(devices)\n          } else {\n            // 清除过期缓存\n            localStorage.removeItem('mobile_control_devices')\n          }\n        }\n      } catch (error) {\n        console.error('加载设备缓存失败:', error)\n        localStorage.removeItem('mobile_control_devices')\n      }\n    },\n    \n    // 清除设备缓存\n    clearDeviceCache() {\n      localStorage.removeItem('mobile_control_devices')\n      this.$message.success('设备缓存已清除')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.mobile-control {\n  height: 100vh;\n  background-color: #f0f2f5;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 工具栏样式 */\n.toolbar {\n  height: 60px;\n  background: #001529;\n  color: white;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n}\n\n.toolbar-left {\n  flex: 0 0 auto;\n}\n\n.toolbar-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: white;\n}\n\n.connection-status {\n  font-size: 12px;\n  margin-top: 4px;\n  color: #ccc;\n}\n\n.toolbar-center {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.stats-info {\n  display: flex;\n  gap: 24px;\n}\n\n.stats-item {\n  color: #ccc;\n  font-size: 13px;\n}\n\n.stats-item strong {\n  color: #1890ff;\n  margin-left: 4px;\n}\n\n.toolbar-right {\n  flex: 0 0 auto;\n  display: flex;\n  gap: 8px;\n}\n\n/* 主要内容区域 */\n.main-content {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n/* 左侧设备列表 */\n.device-sidebar {\n  width: 280px;\n  background: white;\n  border-right: 1px solid #e8e8e8;\n  display: flex;\n  flex-direction: column;\n}\n\n.sidebar-header {\n  height: 50px;\n  padding: 0 16px;\n  border-bottom: 1px solid #f0f0f0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #fafafa;\n}\n\n.sidebar-title {\n  font-weight: 600;\n  color: #262626;\n}\n\n.device-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.empty-list {\n  padding: 40px 20px;\n  text-align: center;\n}\n\n/* 右侧屏幕区域 */\n.screen-area {\n  flex: 1;\n  padding: 16px;\n  overflow-y: auto;\n  background: #f5f5f5;\n}\n\n.screen-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  max-width: 100%;\n  align-items: flex-start;\n}\n\n/* 空窗口样式 */\n.empty-window {\n  aspect-ratio: 16/9;\n  background: #fafafa;\n  border: 2px dashed #d9d9d9;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #bfbfbf;\n  transition: all 0.3s ease;\n}\n\n.empty-window:hover {\n  border-color: #1890ff;\n  color: #1890ff;\n}\n\n.empty-window-content {\n  text-align: center;\n}\n\n.empty-window-content i {\n  font-size: 24px;\n  display: block;\n  margin-bottom: 8px;\n}\n\n.empty-window-content span {\n  font-size: 12px;\n  font-weight: 500;\n}\n\n/* 响应式布局 */\n@media (max-width: 1400px) {\n  /* flex布局自适应，无需额外设置 */\n}\n\n@media (max-width: 1200px) {\n  /* flex布局自适应，无需额外设置 */\n  \n  .device-sidebar {\n    width: 240px;\n  }\n}\n\n@media (max-width: 768px) {\n  .toolbar {\n    flex-direction: column;\n    height: auto;\n    padding: 12px 16px;\n  }\n  \n  .toolbar-center {\n    margin: 8px 0;\n  }\n  \n  .stats-info {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .main-content {\n    flex-direction: column;\n  }\n  \n  .device-sidebar {\n    width: 100%;\n    height: 200px;\n  }\n  \n  /* flex布局自适应 */\n}\n\n@media (max-width: 480px) {\n  /* flex布局自适应 */\n}\n</style>"],"mappings":"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","ignoreList":[]}]}