{"remainingRequest":"/Users/liuce/ailin-web/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuce/ailin-web/frontend/src/views/MobileControl.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/liuce/ailin-web/frontend/src/views/MobileControl.vue","mtime":1755397238981},{"path":"/Users/liuce/ailin-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1755361481208},{"path":"/Users/liuce/ailin-web/frontend/node_modules/babel-loader/lib/index.js","mtime":1755361481592},{"path":"/Users/liuce/ailin-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1755361481208},{"path":"/Users/liuce/ailin-web/frontend/node_modules/vue-loader/lib/index.js","mtime":1755361481658}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgRGV2aWNlTGlzdEl0ZW0gZnJvbSAnQC9jb21wb25lbnRzL0RldmljZUxpc3RJdGVtLnZ1ZScKaW1wb3J0IFNjcmVlbldpbmRvdyBmcm9tICdAL2NvbXBvbmVudHMvU2NyZWVuV2luZG93LnZ1ZScKaW1wb3J0IFN0YXR1c0JhciBmcm9tICdAL2NvbXBvbmVudHMvU3RhdHVzQmFyLnZ1ZScKaW1wb3J0IHsgbW9iaWxlQXBpIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01vYmlsZUNvbnRyb2wnLAogIGNvbXBvbmVudHM6IHsKICAgIERldmljZUxpc3RJdGVtLAogICAgU2NyZWVuV2luZG93LAogICAgU3RhdHVzQmFyCiAgfSwKICAKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0NvbmZpZ0RpYWxvZzogZmFsc2UsCiAgICAgIHNlbGVjdGVkRGV2aWNlOiBudWxsLAogICAgICBjb25maWdGb3JtOiB7CiAgICAgICAgYmFzZUlwOiAnMTkyLjE2OC4zMScsCiAgICAgICAgc3RhcnRSYW5nZTogMCwKICAgICAgICBlbmRSYW5nZTogMjU1LAogICAgICAgIGRldGVjdFBvcnQ6IDk4MDEsCiAgICAgICAgc3RyZWFtUG9ydDogOTgwMgogICAgICB9CiAgICB9CiAgfSwKICAKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWydkZXZpY2VzJywgJ3dzQ29ubmVjdGVkJywgJ25ldHdvcmtDb25maWcnLCAnaXNTY2FubmluZyddKSwKICAgIC4uLm1hcEdldHRlcnMoWydkZXZpY2VDb3VudCcsICdvbmxpbmVEZXZpY2VDb3VudCddKSwKICAgIAogICAgLy8g5oyJSUTmjpLluo/nmoTorr7lpIfliJfooagKICAgIHNvcnRlZERldmljZXMoKSB7CiAgICAgIHJldHVybiBbLi4udGhpcy5kZXZpY2VzXS5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCkKICAgIH0sCiAgICAKICAgIC8vIOaYvuekuuWcqOWxj+W5lee9keagvOS4reeahOiuvuWkh++8iOmZkOWItuaVsOmHj++8iQogICAgZGlzcGxheURldmljZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNvcnRlZERldmljZXMKICAgIH0sCiAgICAKICB9LAogIAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIC8vIOWFs+mXrVdlYlNvY2tldOi/nuaOpQogICAgaWYgKHRoaXMuJHdzKSB7CiAgICAgIHRoaXMuJHdzLmNsb3NlKCkKICAgIH0KICB9LAogIAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydjb25uZWN0V2ViU29ja2V0J10pLAogICAgLi4ubWFwTXV0YXRpb25zKFsnU0VUX05FVFdPUktfQ09ORklHJywgJ1NFVF9TQ0FOTklORyddKSwKICAgIAogICAgLy8g5Yid5aeL5YyWCiAgICBhc3luYyBpbml0KCkgewogICAgICAvLyDov57mjqVXZWJTb2NrZXQKICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCkKICAgICAgCiAgICAgIC8vIOWKoOi9vee9kee7nOmFjee9rgogICAgICB0aGlzLmNvbmZpZ0Zvcm0gPSB7IC4uLnRoaXMubmV0d29ya0NvbmZpZyB9CiAgICAgIAogICAgICAvLyDliqDovb3nvJPlrZjnmoTorr7lpIcKICAgICAgdGhpcy5sb2FkQ2FjaGVkRGV2aWNlcygpCiAgICB9LAogICAgCgogICAgCiAgICAvLyDmiavmj4/orr7lpIfvvIjosIPnlKjlkI7nq69BUEnvvIkKICAgIGFzeW5jIGhhbmRsZVNjYW4oKSB7CiAgICAgIGlmICh0aGlzLmlzU2Nhbm5pbmcpIHJldHVybgogICAgICAKICAgICAgdGhpcy5TRVRfU0NBTk5JTkcodHJ1ZSkKICAgICAgCiAgICAgIHRyeSB7CiAgICAgICAgLy8g5riF56m6546w5pyJ6K6+5aSH5YiX6KGoCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdTRVRfREVWSUNFUycsIFtdKQogICAgICAgIAogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5byA5aeL5omr5o+P5bGA5Z+f572R6K6+5aSHLi4uJykKICAgICAgICAKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2JpbGVBcGkuc2Nhbk5ldHdvcmsoKQogICAgICAgIAogICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDmiavmj4/lrozmiJDvvIzlj5HnjrAgJHtyZXN1bHQuY291bnR9IOS4quiuvuWkh2ApCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9ERVZJQ0VTJywgcmVzdWx0LmRldmljZXMpCiAgICAgICAgICAKICAgICAgICAgIC8vIOe8k+WtmOWIsOacrOWcsOWtmOWCqAogICAgICAgICAgdGhpcy5zYXZlRGV2aWNlc1RvQ2FjaGUocmVzdWx0LmRldmljZXMpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgJ+aJq+aPj+Wksei0pScpCiAgICAgICAgfQogICAgICAgIAogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aJq+aPj+iuvuWkh+Wksei0pTonLCBlcnJvcikKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+aJq+aPj+iuvuWkh+Wksei0pScpCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5TRVRfU0NBTk5JTkcoZmFsc2UpCiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOWIt+aWsOiuvuWkh+WIl+ihqAogICAgYXN5bmMgaGFuZGxlUmVmcmVzaCgpIHsKICAgICAgLy8g55u05o6l6YeN5paw5Yqg6L2957yT5a2Y55qE6K6+5aSHCiAgICAgIHRoaXMubG9hZENhY2hlZERldmljZXMoKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+iuvuWkh+WIl+ihqOW3suWIt+aWsCcpCiAgICB9LAogICAgCiAgICAvLyDnp7vpmaTorr7lpIcKICAgIGFzeW5jIGhhbmRsZVJlbW92ZURldmljZShkZXZpY2VJZCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgeenu+mZpOi/meS4quiuvuWkh+WQl++8nycsICfnoa7orqQnLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgLy8g5LuO5YmN56uv6K6+5aSH5YiX6KGo5Lit56e76ZmkCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdSRU1PVkVfREVWSUNFJywgZGV2aWNlSWQpCiAgICAgICAgCiAgICAgICAgLy8g5pu05paw57yT5a2YCiAgICAgICAgY29uc3QgY3VycmVudERldmljZXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5kZXZpY2VzCiAgICAgICAgdGhpcy5zYXZlRGV2aWNlc1RvQ2FjaGUoY3VycmVudERldmljZXMpCiAgICAgICAgCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCforr7lpIflt7Lnp7vpmaQnKQogICAgICAgIAogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGlmIChlcnJvciAhPT0gJ2NhbmNlbCcpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+enu+mZpOiuvuWkh+Wksei0pTonLCBlcnJvcikKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+enu+mZpOiuvuWkh+Wksei0pScpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDmm7TmlrDnvZHnu5zphY3nva4KICAgIGFzeW5jIGhhbmRsZVVwZGF0ZUNvbmZpZygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2JpbGVBcGkudXBkYXRlTmV0d29ya0NvbmZpZyh0aGlzLmNvbmZpZ0Zvcm0pCiAgICAgICAgCiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLlNFVF9ORVRXT1JLX0NPTkZJRyh0aGlzLmNvbmZpZ0Zvcm0pCiAgICAgICAgICB0aGlzLnNob3dDb25maWdEaWFsb2cgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnvZHnu5zphY3nva7lt7Lmm7TmlrAnKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICfmm7TmlrDphY3nva7lpLHotKUnKQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDnvZHnu5zphY3nva7lpLHotKU6JywgZXJyb3IpCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICfmm7TmlrDphY3nva7lpLHotKUnKQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDpgInmi6norr7lpIcKICAgIGhhbmRsZVNlbGVjdERldmljZShkZXZpY2UpIHsKICAgICAgdGhpcy5zZWxlY3RlZERldmljZSA9IGRldmljZQogICAgfSwKICAgIAoKICAgIAogICAgLy8g5L+d5a2Y6K6+5aSH5Yiw57yT5a2YCiAgICBzYXZlRGV2aWNlc1RvQ2FjaGUoZGV2aWNlcykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGNhY2hlRGF0YSA9IHsKICAgICAgICAgIGRldmljZXM6IGRldmljZXMsCiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICBjb25maWc6IHRoaXMubmV0d29ya0NvbmZpZwogICAgICAgIH0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycsIEpTT04uc3RyaW5naWZ5KGNhY2hlRGF0YSkpCiAgICAgICAgY29uc29sZS5sb2coJ+iuvuWkh+WIl+ihqOW3sue8k+WtmCcpCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5L+d5a2Y6K6+5aSH57yT5a2Y5aSx6LSlOicsIGVycm9yKQogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDku47nvJPlrZjliqDovb3orr7lpIcKICAgIGxvYWRDYWNoZWREZXZpY2VzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGNhY2hlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtb2JpbGVfY29udHJvbF9kZXZpY2VzJykKICAgICAgICBpZiAoY2FjaGVkKSB7CiAgICAgICAgICBjb25zdCBjYWNoZURhdGEgPSBKU09OLnBhcnNlKGNhY2hlZCkKICAgICAgICAgIAogICAgICAgICAgLy8g5qOA5p+l57yT5a2Y5piv5ZCm6L+H5pyf77yIMjTlsI/ml7bvvIkKICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCkKICAgICAgICAgIGNvbnN0IGNhY2hlQWdlID0gbm93IC0gY2FjaGVEYXRhLnRpbWVzdGFtcAogICAgICAgICAgY29uc3QgbWF4QWdlID0gMjQgKiA2MCAqIDYwICogMTAwMCAvLyAyNOWwj+aXtgogICAgICAgICAgCiAgICAgICAgICBpZiAoY2FjaGVBZ2UgPCBtYXhBZ2UgJiYgY2FjaGVEYXRhLmRldmljZXMgJiYgY2FjaGVEYXRhLmRldmljZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyDkv53nlZnlkI7nq6/mj5DkvpvnmoTorr7lpIdJROWSjOeKtuaAge+8jOmBv+WFjeWIt+aWsOWQjklE6ZSZ5Lmx44CB54q25oCB5Y+Y56a757q/CiAgICAgICAgICAgIGNvbnN0IGRldmljZXMgPSBjYWNoZURhdGEuZGV2aWNlcwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ1NFVF9ERVZJQ0VTJywgZGV2aWNlcykKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5pbmZvKGDku47nvJPlrZjliqDovb3kuoYgJHtkZXZpY2VzLmxlbmd0aH0g5Liq6K6+5aSHYCkKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIOWPr+mAie+8mumqjOivgee8k+WtmOeahOiuvuWkh+aYr+WQpuS7jeeEtuWcqOe6vwogICAgICAgICAgICAvLyB0aGlzLnZlcmlmeUNhY2hlZERldmljZXMoZGV2aWNlcykKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOa4hemZpOi/h+acn+e8k+WtmAogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9veiuvuWkh+e8k+WtmOWksei0pTonLCBlcnJvcikKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbW9iaWxlX2NvbnRyb2xfZGV2aWNlcycpCiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOa4hemZpOiuvuWkh+e8k+WtmAogICAgY2xlYXJEZXZpY2VDYWNoZSgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ21vYmlsZV9jb250cm9sX2RldmljZXMnKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+iuvuWkh+e8k+WtmOW3sua4hemZpCcpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["MobileControl.vue"],"names":[],"mappings":";AA0LA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MobileControl.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"mobile-control\">\n    <!-- 头部工具栏 -->\n    <div class=\"toolbar\">\n      <div class=\"toolbar-left\">\n        <h1 class=\"toolbar-title\">手机中控系统</h1>\n        <div class=\"connection-status\">\n          <span class=\"status-indicator\" :class=\"wsConnected ? 'status-online' : 'status-offline'\"></span>\n          {{ wsConnected ? '已连接' : '未连接' }}\n        </div>\n      </div>\n      \n      <div class=\"toolbar-center\">\n        <!-- 统计信息 -->\n        <div class=\"stats-info\">\n          <span class=\"stats-item\">设备总数: <strong>{{ deviceCount }}</strong></span>\n          <span class=\"stats-item\">在线设备: <strong>{{ onlineDeviceCount }}</strong></span>\n          <span class=\"stats-item\">离线设备: <strong>{{ deviceCount - onlineDeviceCount }}</strong></span>\n        </div>\n      </div>\n      \n      <div class=\"toolbar-right\">\n        <!-- 操作按钮 -->\n        <el-button \n          size=\"small\"\n          type=\"primary\" \n          icon=\"el-icon-search\" \n          :loading=\"isScanning\"\n          @click=\"handleScan\"\n        >\n          {{ isScanning ? '扫描中...' : '扫描设备' }}\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-setting\" \n          @click=\"showConfigDialog = true\"\n        >\n          配置\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-refresh\" \n          @click=\"handleRefresh\"\n        >\n          刷新\n        </el-button>\n        \n        <el-button \n          size=\"small\"\n          icon=\"el-icon-delete\" \n          @click=\"clearDeviceCache\"\n        >\n          清除缓存\n        </el-button>\n      </div>\n    </div>\n\n    <!-- 主要内容区域 -->\n    <div class=\"main-content\">\n      <!-- 左侧设备列表 -->\n      <div class=\"device-sidebar\">\n        <div class=\"sidebar-header\">\n          <span class=\"sidebar-title\">设备列表</span>\n          <el-button \n            type=\"text\" \n            icon=\"el-icon-plus\" \n            size=\"mini\"\n            :loading=\"isScanning\"\n            @click=\"handleScan\"\n          >\n            {{ isScanning ? '扫描中' : '扫描' }}\n          </el-button>\n        </div>\n        \n        <div class=\"device-list\">\n          <DeviceListItem\n            v-for=\"device in sortedDevices\"\n            :key=\"device.id\"\n            :device=\"device\"\n            :selected=\"selectedDevice && selectedDevice.id === device.id\"\n            @select=\"handleSelectDevice\"\n            @remove=\"handleRemoveDevice\"\n          />\n          \n          <!-- 空状态 -->\n          <div v-if=\"devices.length === 0\" class=\"empty-list\">\n            <el-empty \n              description=\"暂无设备\" \n              :image-size=\"80\"\n            >\n              <el-button \n                type=\"primary\" \n                size=\"small\"\n                @click=\"handleScan\"\n              >\n                开始扫描\n              </el-button>\n            </el-empty>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 右侧屏幕网格 -->\n      <div class=\"screen-area\">\n        <div class=\"screen-grid\">\n          <ScreenWindow\n            v-for=\"device in displayDevices\"\n            :key=\"device.id\"\n            :device=\"device\"\n            @select=\"handleSelectDevice\"\n          />\n        </div>\n      </div>\n    </div>\n    \n    <!-- 底部状态栏 -->\n    <StatusBar />\n\n    <!-- 网络配置对话框 -->\n    <el-dialog\n      title=\"网络配置\"\n      :visible.sync=\"showConfigDialog\"\n      width=\"500px\"\n    >\n      <div class=\"config-panel\" style=\"margin: 0; box-shadow: none;\">\n        <div class=\"config-row\">\n          <label class=\"config-label\">基础IP:</label>\n          <el-input\n            v-model=\"configForm.baseIp\"\n            placeholder=\"例如：192.168.31\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">起始范围:</label>\n          <el-input-number\n            v-model=\"configForm.startRange\"\n            :min=\"0\"\n            :max=\"255\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">结束范围:</label>\n          <el-input-number\n            v-model=\"configForm.endRange\"\n            :min=\"0\"\n            :max=\"255\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">检测端口:</label>\n          <el-input-number\n            v-model=\"configForm.detectPort\"\n            :min=\"1\"\n            :max=\"65535\"\n            style=\"flex: 1;\"\n          />\n        </div>\n        \n        <div class=\"config-row\">\n          <label class=\"config-label\">投屏端口:</label>\n          <el-input-number\n            v-model=\"configForm.streamPort\"\n            :min=\"1\"\n            :max=\"65535\"\n            style=\"flex: 1;\"\n          />\n        </div>\n      </div>\n      \n      <div slot=\"footer\">\n        <el-button @click=\"showConfigDialog = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleUpdateConfig\">保存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex'\nimport DeviceListItem from '@/components/DeviceListItem.vue'\nimport ScreenWindow from '@/components/ScreenWindow.vue'\nimport StatusBar from '@/components/StatusBar.vue'\nimport { mobileApi } from '@/services/api'\n\nexport default {\n  name: 'MobileControl',\n  components: {\n    DeviceListItem,\n    ScreenWindow,\n    StatusBar\n  },\n  \n  data() {\n    return {\n      showConfigDialog: false,\n      selectedDevice: null,\n      configForm: {\n        baseIp: '192.168.31',\n        startRange: 0,\n        endRange: 255,\n        detectPort: 9801,\n        streamPort: 9802\n      }\n    }\n  },\n  \n  computed: {\n    ...mapState(['devices', 'wsConnected', 'networkConfig', 'isScanning']),\n    ...mapGetters(['deviceCount', 'onlineDeviceCount']),\n    \n    // 按ID排序的设备列表\n    sortedDevices() {\n      return [...this.devices].sort((a, b) => a.id - b.id)\n    },\n    \n    // 显示在屏幕网格中的设备（限制数量）\n    displayDevices() {\n      return this.sortedDevices\n    },\n    \n  },\n  \n  created() {\n    this.init()\n  },\n  \n  beforeDestroy() {\n    // 关闭WebSocket连接\n    if (this.$ws) {\n      this.$ws.close()\n    }\n  },\n  \n  methods: {\n    ...mapActions(['connectWebSocket']),\n    ...mapMutations(['SET_NETWORK_CONFIG', 'SET_SCANNING']),\n    \n    // 初始化\n    async init() {\n      // 连接WebSocket\n      this.connectWebSocket()\n      \n      // 加载网络配置\n      this.configForm = { ...this.networkConfig }\n      \n      // 加载缓存的设备\n      this.loadCachedDevices()\n    },\n    \n\n    \n    // 扫描设备（调用后端API）\n    async handleScan() {\n      if (this.isScanning) return\n      \n      this.SET_SCANNING(true)\n      \n      try {\n        // 清空现有设备列表\n        this.$store.commit('SET_DEVICES', [])\n        \n        this.$message.info('开始扫描局域网设备...')\n        \n        const result = await mobileApi.scanNetwork()\n        \n        if (result.success) {\n          this.$message.success(`扫描完成，发现 ${result.count} 个设备`)\n          this.$store.commit('SET_DEVICES', result.devices)\n          \n          // 缓存到本地存储\n          this.saveDevicesToCache(result.devices)\n        } else {\n          this.$message.error(result.message || '扫描失败')\n        }\n        \n      } catch (error) {\n        console.error('扫描设备失败:', error)\n        this.$message.error(error.message || '扫描设备失败')\n      } finally {\n        this.SET_SCANNING(false)\n      }\n    },\n    \n    // 刷新设备列表\n    async handleRefresh() {\n      // 直接重新加载缓存的设备\n      this.loadCachedDevices()\n      this.$message.success('设备列表已刷新')\n    },\n    \n    // 移除设备\n    async handleRemoveDevice(deviceId) {\n      try {\n        await this.$confirm('确定要移除这个设备吗？', '确认', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        \n        // 从前端设备列表中移除\n        this.$store.commit('REMOVE_DEVICE', deviceId)\n        \n        // 更新缓存\n        const currentDevices = this.$store.state.devices\n        this.saveDevicesToCache(currentDevices)\n        \n        this.$message.success('设备已移除')\n        \n      } catch (error) {\n        if (error !== 'cancel') {\n          console.error('移除设备失败:', error)\n          this.$message.error('移除设备失败')\n        }\n      }\n    },\n    \n    // 更新网络配置\n    async handleUpdateConfig() {\n      try {\n        const result = await mobileApi.updateNetworkConfig(this.configForm)\n        \n        if (result.success) {\n          this.SET_NETWORK_CONFIG(this.configForm)\n          this.showConfigDialog = false\n          this.$message.success('网络配置已更新')\n        } else {\n          this.$message.error(result.message || '更新配置失败')\n        }\n      } catch (error) {\n        console.error('更新网络配置失败:', error)\n        this.$message.error(error.message || '更新配置失败')\n      }\n    },\n    \n    // 选择设备\n    handleSelectDevice(device) {\n      this.selectedDevice = device\n    },\n    \n\n    \n    // 保存设备到缓存\n    saveDevicesToCache(devices) {\n      try {\n        const cacheData = {\n          devices: devices,\n          timestamp: Date.now(),\n          config: this.networkConfig\n        }\n        localStorage.setItem('mobile_control_devices', JSON.stringify(cacheData))\n        console.log('设备列表已缓存')\n      } catch (error) {\n        console.error('保存设备缓存失败:', error)\n      }\n    },\n    \n    // 从缓存加载设备\n    loadCachedDevices() {\n      try {\n        const cached = localStorage.getItem('mobile_control_devices')\n        if (cached) {\n          const cacheData = JSON.parse(cached)\n          \n          // 检查缓存是否过期（24小时）\n          const now = Date.now()\n          const cacheAge = now - cacheData.timestamp\n          const maxAge = 24 * 60 * 60 * 1000 // 24小时\n          \n          if (cacheAge < maxAge && cacheData.devices && cacheData.devices.length > 0) {\n            // 保留后端提供的设备ID和状态，避免刷新后ID错乱、状态变离线\n            const devices = cacheData.devices\n            this.$store.commit('SET_DEVICES', devices)\n            this.$message.info(`从缓存加载了 ${devices.length} 个设备`)\n            \n            // 可选：验证缓存的设备是否仍然在线\n            // this.verifyCachedDevices(devices)\n          } else {\n            // 清除过期缓存\n            localStorage.removeItem('mobile_control_devices')\n          }\n        }\n      } catch (error) {\n        console.error('加载设备缓存失败:', error)\n        localStorage.removeItem('mobile_control_devices')\n      }\n    },\n    \n    // 清除设备缓存\n    clearDeviceCache() {\n      localStorage.removeItem('mobile_control_devices')\n      this.$message.success('设备缓存已清除')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.mobile-control {\n  height: 100vh;\n  background-color: #f0f2f5;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 工具栏样式 */\n.toolbar {\n  height: 60px;\n  background: #001529;\n  color: white;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n}\n\n.toolbar-left {\n  flex: 0 0 auto;\n}\n\n.toolbar-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: white;\n}\n\n.connection-status {\n  font-size: 12px;\n  margin-top: 4px;\n  color: #ccc;\n}\n\n.toolbar-center {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n\n.stats-info {\n  display: flex;\n  gap: 24px;\n}\n\n.stats-item {\n  color: #ccc;\n  font-size: 13px;\n}\n\n.stats-item strong {\n  color: #1890ff;\n  margin-left: 4px;\n}\n\n.toolbar-right {\n  flex: 0 0 auto;\n  display: flex;\n  gap: 8px;\n}\n\n/* 主要内容区域 */\n.main-content {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n/* 左侧设备列表 */\n.device-sidebar {\n  width: 280px;\n  background: white;\n  border-right: 1px solid #e8e8e8;\n  display: flex;\n  flex-direction: column;\n}\n\n.sidebar-header {\n  height: 50px;\n  padding: 0 16px;\n  border-bottom: 1px solid #f0f0f0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #fafafa;\n}\n\n.sidebar-title {\n  font-weight: 600;\n  color: #262626;\n}\n\n.device-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.empty-list {\n  padding: 40px 20px;\n  text-align: center;\n}\n\n/* 右侧屏幕区域 */\n.screen-area {\n  flex: 1;\n  padding: 16px;\n  overflow-y: auto;\n  background: #f5f5f5;\n}\n\n.screen-grid {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  max-width: 100%;\n  align-items: flex-start;\n}\n\n/* 空窗口样式 */\n.empty-window {\n  aspect-ratio: 16/9;\n  background: #fafafa;\n  border: 2px dashed #d9d9d9;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #bfbfbf;\n  transition: all 0.3s ease;\n}\n\n.empty-window:hover {\n  border-color: #1890ff;\n  color: #1890ff;\n}\n\n.empty-window-content {\n  text-align: center;\n}\n\n.empty-window-content i {\n  font-size: 24px;\n  display: block;\n  margin-bottom: 8px;\n}\n\n.empty-window-content span {\n  font-size: 12px;\n  font-weight: 500;\n}\n\n/* 响应式布局 */\n@media (max-width: 1400px) {\n  /* flex布局自适应，无需额外设置 */\n}\n\n@media (max-width: 1200px) {\n  /* flex布局自适应，无需额外设置 */\n  \n  .device-sidebar {\n    width: 240px;\n  }\n}\n\n@media (max-width: 768px) {\n  .toolbar {\n    flex-direction: column;\n    height: auto;\n    padding: 12px 16px;\n  }\n  \n  .toolbar-center {\n    margin: 8px 0;\n  }\n  \n  .stats-info {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  .main-content {\n    flex-direction: column;\n  }\n  \n  .device-sidebar {\n    width: 100%;\n    height: 200px;\n  }\n  \n  /* flex布局自适应 */\n}\n\n@media (max-width: 480px) {\n  /* flex布局自适应 */\n}\n</style>"]}]}